/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ui;

import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import model.VitalSignHistory;
import model.VitalSigns;

/**
 *
 * @author rutuja
 */
public class ViewJPanel extends javax.swing.JPanel {

    /**
     * Creates new form ViewJPanel
     */
    VitalSignHistory vitalhistory;
    public ViewJPanel(VitalSignHistory vitalhistory) {
        initComponents();
        this.vitalhistory= vitalhistory;
        populatetabel();
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        viewpanellbl = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        tblvitalsign = new javax.swing.JTable();
        ViewVitalbtn = new javax.swing.JButton();
        deletebtn = new javax.swing.JButton();
        viewtemplbl = new javax.swing.JLabel();
        viewbplbl = new javax.swing.JLabel();
        viewpulselbl = new javax.swing.JLabel();
        viewdatelbl = new javax.swing.JLabel();
        viewtemptxt = new javax.swing.JTextField();
        viewbptxt = new javax.swing.JTextField();
        viewpulsetxt = new javax.swing.JTextField();
        viewdatetxt = new javax.swing.JTextField();

        setBackground(new java.awt.Color(243, 206, 206));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        viewpanellbl.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        viewpanellbl.setText("View Vital Sign");
        add(viewpanellbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 15, 571, -1));

        tblvitalsign.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Date", "Tempreture", "Pulse"
            }
        ));
        jScrollPane1.setViewportView(tblvitalsign);

        add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(99, 49, 410, 138));

        ViewVitalbtn.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        ViewVitalbtn.setText("View VitalSigns");
        ViewVitalbtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ViewVitalbtnActionPerformed(evt);
            }
        });
        add(ViewVitalbtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(126, 199, 176, -1));

        deletebtn.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        deletebtn.setText("Delete VitalSIgns");
        deletebtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                deletebtnActionPerformed(evt);
            }
        });
        add(deletebtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(333, 199, -1, -1));

        viewtemplbl.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        viewtemplbl.setText("Tempreture:");
        add(viewtemplbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(208, 266, -1, -1));

        viewbplbl.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        viewbplbl.setText("Blood Pressure:");
        add(viewbplbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(184, 304, -1, -1));

        viewpulselbl.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        viewpulselbl.setText("Pulse:");
        add(viewpulselbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(259, 348, -1, -1));

        viewdatelbl.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        viewdatelbl.setText("Date:");
        add(viewdatelbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(264, 386, -1, -1));

        viewtemptxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewtemptxtActionPerformed(evt);
            }
        });
        add(viewtemptxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(317, 264, 93, -1));

        viewbptxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewbptxtActionPerformed(evt);
            }
        });
        add(viewbptxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(317, 302, 93, -1));

        viewpulsetxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewpulsetxtActionPerformed(evt);
            }
        });
        add(viewpulsetxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(317, 346, 93, -1));

        viewdatetxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                viewdatetxtActionPerformed(evt);
            }
        });
        add(viewdatetxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(317, 384, 93, -1));
    }// </editor-fold>//GEN-END:initComponents

    private void ViewVitalbtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ViewVitalbtnActionPerformed
        // TODO add your handling code here:
        int selectedRowIndex = tblvitalsign.getSelectedRow();
       
       if (selectedRowIndex<0){
           JOptionPane.showMessageDialog(this, "please select a row to delete.");
           return;
       }
       
      DefaultTableModel model = (DefaultTableModel)tblvitalsign.getModel();
      VitalSigns vitals = (VitalSigns) model.getValueAt(selectedRowIndex, 0);
      viewtemptxt.setText(String.valueOf(vitals.getTemperature()));
      viewbptxt.setText(String.valueOf(vitals.getBloodPressure()));
      viewpulsetxt.setText(String.valueOf(vitals.getPulse()));
      viewdatetxt.setText(String.valueOf(vitals.getDate()));
      
      
    }//GEN-LAST:event_ViewVitalbtnActionPerformed

    private void deletebtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_deletebtnActionPerformed
        // TODO add your handling code here:
        int selectedRowIndex = tblvitalsign.getSelectedRow();
       
       if (selectedRowIndex<0){
           JOptionPane.showMessageDialog(this, "please select a row to delete.");
           return;
    }//GEN-LAST:event_deletebtnActionPerformed
        ((DefaultTableModel)tblvitalsign.getModel()).removeRow(selectedRowIndex);
        vitalhistory.deleteVitals(selectedRowIndex);
        JOptionPane.showMessageDialog(this, "Vital sign deleted.");
    }       
    
    private void viewtemptxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_viewtemptxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_viewtemptxtActionPerformed

    private void viewbptxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_viewbptxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_viewbptxtActionPerformed

    private void viewpulsetxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_viewpulsetxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_viewpulsetxtActionPerformed

    private void viewdatetxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_viewdatetxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_viewdatetxtActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton ViewVitalbtn;
    private javax.swing.JButton deletebtn;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tblvitalsign;
    private javax.swing.JLabel viewbplbl;
    private javax.swing.JTextField viewbptxt;
    private javax.swing.JLabel viewdatelbl;
    private javax.swing.JTextField viewdatetxt;
    private javax.swing.JLabel viewpanellbl;
    private javax.swing.JLabel viewpulselbl;
    private javax.swing.JTextField viewpulsetxt;
    private javax.swing.JLabel viewtemplbl;
    private javax.swing.JTextField viewtemptxt;
    // End of variables declaration//GEN-END:variables

    private void populatetabel() {
        DefaultTableModel model = (DefaultTableModel) tblvitalsign.getModel();
        model.setRowCount(0);
        
        for (VitalSigns vs : vitalhistory.getHistory()){
          
            Object[] row = new Object[3];
            row[0] = vs;
            row[1] = vs.getTemperature();
            row[2] = vs.getPulse();
            
            
            model.addRow(row);
        }
    }
}
